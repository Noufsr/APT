<ion-header>
  <ion-toolbar class="modal-header">
    <div class="header-content">
      <ion-icon name="create-outline" class="header-icon"></ion-icon>
      <ion-title>Editar Producto</ion-title>
    </div>
    <ion-buttons slot="end">
      <ion-button (click)="cerrar()" class="close-button">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="modal-content">
  <div class="content-section">
    <!-- Icono de editar producto -->
    <div class="product-icon-container">
      <div class="product-icon-circle edit-mode">
        <ion-icon name="pencil-outline"></ion-icon>
      </div>
    </div>

    <!-- Formulario -->
    <div class="form-card">
      <form>
        <!-- CAD -->
        <div class="form-field">
          <label>
            <ion-icon name="barcode-outline"></ion-icon>
            CAD (Código Almacén Daniella)
          </label>
          <input
            type="text"
            [(ngModel)]="producto.cad"
            name="cad"
            placeholder="Código Almacén Daniella">
        </div>

        <!-- Código de Barras -->
        <div class="form-field">
          <label>
            <ion-icon name="scan-outline"></ion-icon>
            Código de Barras
          </label>
          <input
            type="number"
            [(ngModel)]="producto.cod_barras"
            name="cod_barras"
            placeholder="Código de barras">
        </div>

        <!-- Nombre -->
        <div class="form-field">
          <label>
            <ion-icon name="text-outline"></ion-icon>
            Nombre
          </label>
          <input
            type="text"
            [(ngModel)]="producto.nombre"
            name="nombre"
            placeholder="Nombre del producto">
        </div>

        <!-- Tipo Unidad -->
        <div class="form-field">
          <label>
            <ion-icon name="scale-outline"></ion-icon>
            Tipo Unidad
          </label>
          <select [(ngModel)]="producto.unidad" name="unidad">
            <option value="U">Unidad</option>
            <option value="KG">Kilogramo</option>
          </select>
        </div>

        <!-- Stock y Stock Crítico -->
        <div class="form-row">
          <div class="form-field">
            <label>
              <ion-icon name="layers-outline"></ion-icon>
              Stock
            </label>
            <input
              type="number"
              [(ngModel)]="producto.stock"
              name="stock"
              placeholder="Stock actual">
          </div>

          <div class="form-field">
            <label>
              <ion-icon name="warning-outline"></ion-icon>
              Stock Crítico
            </label>
            <input
              type="number"
              [(ngModel)]="producto.aviso_stock"
              name="aviso_stock"
              placeholder="Aviso de stock">
          </div>
        </div>

        <!-- Precios -->
        <div class="form-row">
          <div class="form-field">
            <label>
              <ion-icon name="cart-outline"></ion-icon>
              Precio Compra
            </label>
            <div class="input-wrapper">
              <span class="currency-symbol">$</span>
              <input
                type="number"
                [(ngModel)]="producto.precio_compra"
                name="precio_compra"
                placeholder="0">
            </div>
          </div>

          <div class="form-field">
            <label>
              <ion-icon name="cash-outline"></ion-icon>
              Precio Venta
            </label>
            <div class="input-wrapper">
              <span class="currency-symbol">$</span>
              <input
                type="number"
                [(ngModel)]="producto.precio_venta"
                name="precio_venta"
                placeholder="0">
            </div>
          </div>
        </div>

        <!-- Marca y Categoría -->
        <div class="form-row">
          <div class="form-field">
            <label>
              <ion-icon name="ribbon-outline"></ion-icon>
              Marca
            </label>
            <input
              type="text"
              [(ngModel)]="producto.marca"
              name="marca"
              placeholder="Marca del producto">
          </div>

          <div class="form-field">
            <label>
              <ion-icon name="folder-outline"></ion-icon>
              Categoría
            </label>
            <input
              type="text"
              [(ngModel)]="producto.categoria"
              name="categoria"
              placeholder="Categoría">
          </div>
        </div>

        <!-- Proveedor -->
        <div class="form-field">
          <label>
            <ion-icon name="business-outline"></ion-icon>
            Proveedor
          </label>
          <select [(ngModel)]="producto.idproveedor" name="idproveedor">
            <option value="">Seleccionar proveedor</option>
            <option *ngFor="let proveedor of proveedores" [value]="proveedor.id">
              {{ proveedor.nombreProveedor }}
            </option>
          </select>
        </div>

        <!-- Botón de guardar -->
        <div class="form-actions">
          <button
            class="action-button primary"
            (click)="guardar()">
            <ion-icon name="save-outline"></ion-icon>
            Guardar modificaciones
          </button>
        </div>
      </form>
    </div>
  </div>
</ion-content>
