<ion-header>
  <ion-toolbar class="modal-header">
    <div class="header-content">
      <ion-icon name="person-circle-outline" class="header-icon"></ion-icon>
      <ion-title>Detalle Usuario</ion-title>
    </div>
    <ion-buttons slot="end">
      <ion-button (click)="close()" class="close-button">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="modal-content">
  <div class="content-section">
    <!-- Avatar del usuario -->
    <div class="user-avatar-container">
      <div class="user-avatar">
        <ion-icon name="person"></ion-icon>
      </div>
      <div class="user-email">{{ user.email }}</div>
    </div>

    <!-- Formulario -->
    <div class="form-card">
      <form [formGroup]="userForm" (ngSubmit)="save()">
        <!-- Email (readonly) -->
        <div class="form-field readonly">
          <label>
            <ion-icon name="mail-outline"></ion-icon>
            Correo Electrónico
          </label>
          <input
            type="email"
            [value]="user.email"
            readonly
            class="readonly-input">
        </div>

        <!-- Nombre -->
        <div class="form-field">
          <label>
            <ion-icon name="person-outline"></ion-icon>
            Nombre
          </label>
          <input
            type="text"
            formControlName="nombre"
            placeholder="Nombre completo del usuario">
        </div>

        <!-- Teléfono -->
        <div class="form-field">
          <label>
            <ion-icon name="call-outline"></ion-icon>
            Teléfono
          </label>
          <input
            type="tel"
            formControlName="telefono"
            placeholder="+56 9 1234 5678">
        </div>

        <!-- Dirección -->
        <div class="form-field">
          <label>
            <ion-icon name="location-outline"></ion-icon>
            Dirección
          </label>
          <input
            type="text"
            formControlName="direccion"
            placeholder="Dirección del usuario">
        </div>

        <!-- Rol -->
        <div class="form-field">
          <label>
            <ion-icon name="shield-checkmark-outline"></ion-icon>
            Rol
          </label>
          <select formControlName="role">
            <option value="admin">Administrador</option>
            <option value="user">Usuario</option>
          </select>
        </div>

        <!-- Estado Activo -->
        <div class="toggle-field">
          <div class="toggle-content">
            <div class="toggle-info">
              <ion-icon name="power-outline"></ion-icon>
              <div>
                <span class="toggle-label">Estado del Usuario</span>
                <span class="toggle-description">Usuario activo en el sistema</span>
              </div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" formControlName="activo">
              <span class="slider"></span>
            </label>
          </div>
        </div>

        <!-- Botón de guardar -->
        <div class="form-actions">
          <button
            type="submit"
            class="action-button primary"
            [disabled]="saving || userForm.invalid">
            <ion-icon name="save-outline"></ion-icon>
            <span *ngIf="!saving">Guardar Cambios</span>
            <span *ngIf="saving">Guardando...</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</ion-content>
